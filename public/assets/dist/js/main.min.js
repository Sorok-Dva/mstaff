let activeBtnLoader;jQuery.each(["put","patch","delete"],function(e,t){jQuery[t]=function(e,a,r,i){return jQuery.isFunction(a)&&(i=i||r,r=a,a=void 0),jQuery.ajax({url:e,type:t,dataType:i,data:a,headers:a.headers,success:r})}});let notification=e=>{$.notify({icon:`fa fa-${e.icon}`,title:`<b>${e.title}</b>`,message:`${e.message}`},{type:`${e.type}`,allow_dismiss:!0,newest_on_top:!0,showProgressbar:!0,placement:{from:"bottom",align:"left"},offset:20,spacing:10,z_index:9999999999,delay:e.timer||5e3,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},errorsHandler=e=>{let t=void 0===e?null:e;if(t&&t.responseJSON&&t.responseJSON.errors)t.responseJSON.errors.forEach((e,t)=>{notification({icon:"exclamation",type:"danger",title:"Champ invalide :",message:`${e.param}`})});else{let e=t&&t.sequelizeError?`<b>${t.sequelizeError.name}</b>: ${t.sequelizeError.original.sqlMessage}`:t.responseText||"Unknown Error";notification({icon:"exclamation",type:"danger",title:"Une erreur est survenue :",message:e})}},loadTemplate=(e,t,a)=>{if(t.partials)for(let e=0;e<t.partials.length;e++)$.ajax({url:`/static/views/partials/${t.partials[e]}.hbs`,cache:!0,success:function(a){Handlebars.registerPartial(`${t.partials[e]}`,a)}});Handlebars.registerHelper("log",function(){console.log(["Values:"].concat(Array.prototype.slice.call(arguments,0,-1)))}),Handlebars.registerHelper("ifCond",(e,t,a,r)=>{switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"!=":return e!=a?r.fn(this):r.inverse(this);case"!==":return e!==a?r.fn(this):r.inverse(this);case"<":return e<a?r.fn(this):r.inverse(this);case"<=":return e<=a?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),Handlebars.registerHelper("repeat",function(e,t){let a="";for(let r=0;r<e;++r)a+=t.fn(r);return a}),Handlebars.registerHelper("partial",function(e){return e}),$.ajax({url:e,cache:!0,success:function(e){if(!t.modal){let r=Handlebars.compile(e);return a(r(t))}$.ajax({url:`/static/views/modals/partials/${t.modal}.hbs`,cache:!0,success:function(r){Handlebars.registerPartial(`${t.modal}`,r);let i=Handlebars.compile(e);return a(i(t))}})}})},createModal=(e,t)=>{$(`#${e.id}`).remove(),loadTemplate("/static/views/modals/main.hbs",e,a=>{let r=e.canBeClose?null:{backdrop:"static",keyboard:!1};if($("body").append(a),$(`#${e.id}`).modal(r),t)return t()})},nextTab=e=>$(e).next().find('a.tabWizard[data-toggle="tab"]').click(),prevTab=e=>$(e).prev().find('a.tabWizard[data-toggle="tab"]').click();$(document).ready(function(){$("body").prepend('<div id="dialog"></div>'),$("#dialog").dialog({autoOpen:!1,show:{effect:"fade"},hide:{effect:"fade"},modal:!0,width:650,position:{my:"top",at:"top+150"},close:(e,t)=>$("#wrap").show(),open:(e,t)=>{$(".ui-widget-overlay").bind("click",()=>{$("#dialog").dialog("close")})}}),$(document).on("click",".btn-loader",e=>{let t=$(e.target);activeBtnLoader=t;let a=t.attr("data-loading-text");t.html()!==a&&(t.data("original-text",t.html()),t.html(a)),setTimeout(function(){t.html(t.data("original-text"))},1e4)}),$(".nav-tabs > li a[title]").tooltip(),$('a[data-toggle="tab"]').on("show.bs.tab",function(e){if($(e.target).parent().hasClass("disabled"))return!1}),$(".stop-step").click(function(e){history.back()})});